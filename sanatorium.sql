--
-- Script was generated by Devart dbForge Studio 2020 for MySQL, Version 9.0.791.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 10.05.2023 0:20:13
-- Server version: 8.0.28
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

DROP DATABASE IF EXISTS sanatorium;

CREATE DATABASE sanatorium
	CHARACTER SET utf8mb4
	COLLATE utf8mb4_0900_ai_ci;

--
-- Set default database
--
USE sanatorium;

--
-- Create table `doctors`
--
CREATE TABLE doctors (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) DEFAULT NULL,
  surname VARCHAR(50) DEFAULT NULL,
  position VARCHAR(50) DEFAULT NULL,
  category VARCHAR(50) DEFAULT NULL,
  image VARCHAR(255) DEFAULT '1.jpg',
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `services`
--
CREATE TABLE services (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) DEFAULT NULL,
  decription VARCHAR(255) DEFAULT NULL,
  cost INT DEFAULT NULL,
  idDoctor INT NOT NULL,
  image VARCHAR(100) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 10,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE services 
  ADD CONSTRAINT FK_services_doctors_id FOREIGN KEY (idDoctor)
    REFERENCES doctors(id);

--
-- Create table `rooms`
--
CREATE TABLE rooms (
  id INT NOT NULL AUTO_INCREMENT,
  number INT DEFAULT NULL,
  type VARCHAR(20) DEFAULT NULL,
  capacity INT DEFAULT NULL,
  description VARCHAR(100) DEFAULT NULL,
  cost DECIMAL(19, 2) DEFAULT NULL,
  image VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create table `vouchers`
--
CREATE TABLE vouchers (
  id INT NOT NULL AUTO_INCREMENT,
  idRoom INT NOT NULL,
  title VARCHAR(50) DEFAULT NULL,
  description VARCHAR(255) DEFAULT NULL,
  cost DECIMAL(19, 2) DEFAULT NULL,
  duration INT DEFAULT NULL,
  image VARCHAR(255) DEFAULT NULL,
  amount INT DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 21,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE vouchers 
  ADD CONSTRAINT FK_vouchers_rooms_id FOREIGN KEY (idRoom)
    REFERENCES rooms(id);

--
-- Create table `vouchersservices`
--
CREATE TABLE vouchersservices (
  id INT NOT NULL AUTO_INCREMENT,
  idVoucher INT NOT NULL,
  idService INT NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 7,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE vouchersservices 
  ADD CONSTRAINT FK_vouchersservices_services_id FOREIGN KEY (idService)
    REFERENCES services(id);

--
-- Create foreign key
--
ALTER TABLE vouchersservices 
  ADD CONSTRAINT FK_vouchersservices_vouchers_id FOREIGN KEY (idVoucher)
    REFERENCES vouchers(id);

--
-- Create table `user`
--
CREATE TABLE user (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL,
  surname VARCHAR(255) DEFAULT NULL,
  birthDate DATE NOT NULL,
  phoneNumber VARCHAR(255) NOT NULL,
  email VARCHAR(50) NOT NULL,
  password VARCHAR(20) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 17,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create index `password` on table `user`
--
ALTER TABLE user 
  ADD UNIQUE INDEX password(password);

--
-- Create table `booking`
--
CREATE TABLE booking (
  id INT NOT NULL AUTO_INCREMENT,
  idUser INT NOT NULL,
  idVoucher INT NOT NULL,
  startDate DATE DEFAULT NULL,
  totalCost DECIMAL(10, 2) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 14,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci;

--
-- Create foreign key
--
ALTER TABLE booking 
  ADD CONSTRAINT FK_booking_user_id FOREIGN KEY (idUser)
    REFERENCES user(id) ON DELETE CASCADE;

--
-- Create foreign key
--
ALTER TABLE booking 
  ADD CONSTRAINT FK_booking_vouchers_id FOREIGN KEY (idVoucher)
    REFERENCES vouchers(id);

-- 
-- Dumping data for table doctors
--
INSERT INTO doctors VALUES
(1, 'Андрей', 'Иванов', 'Врач-терапевт', 'Первая категория', 'doctor.png'),
(2, 'Мария', 'Петрова', 'Врач-кардиолог', 'Высшая категория', 'doctor1.png'),
(3, 'Сергей', 'Сидоров', 'Врач-хирург', 'Вторая категория', 'doctor2.png'),
(4, 'Елена', 'Козлова', 'Врач-невролог', 'Первая категория', 'doctor3.png');

-- 
-- Dumping data for table rooms
--
INSERT INTO rooms VALUES
(6, 101, 'Одноместный', 1, 'Уютный номер с одной кроватью', 1000.00, 'room.png'),
(7, 102, 'Одноместный', 1, 'Просторный номер с одной кроватью', 1200.00, 'room1.png'),
(8, 201, 'Двухместный', 2, 'Комфортабельный номер с двумя кроватями', 1800.00, 'room2.png'),
(9, 202, 'Двухместный', 2, 'Современный номер с двумя кроватями и балконом', 2000.00, 'room2.png'),
(10, 301, 'Трехместный', 3, 'Просторный номер с тремя кроватями и видом на горы', 2400.00, 'room3.png');

-- 
-- Dumping data for table services
--
INSERT INTO services VALUES
(5, 'Массаж', 'Расслабляющий массаж всего тела', 50, 1, 'service0.jpg'),
(6, 'Акупунктура', 'Традиционное китайское лечение акупунктурой', 80, 2, 'service1.jpg'),
(7, 'Грязелечение', 'Терапевтическое нанесение грязи для облегчения боли', 60, 3, 'service2.jpg'),
(8, 'Консультация по питанию', 'Персонализированный совет по питанию', 30, 4, 'service3.jpg');

-- 
-- Dumping data for table vouchers
--
INSERT INTO vouchers VALUES
(17, 6, 'Оздоровительный путевой лист на 7 дней', 'Описание оздоровительного путевого листа на 7 дней', 15000.00, 7, 'voucher.png', 3),
(18, 7, 'Лечебный путевой лист на 14 дней', 'Описание лечебного путевого листа на 14 дней', 30000.00, 14, 'voucher1.png', 5),
(19, 8, 'Спортивный путевой лист на 10 дней', 'Описание спортивного путевого листа на 10 дней', 20000.00, 10, 'voucher2.png', 0),
(20, 9, 'Экскурсионный путевой лист на 5 дней', 'Описание экскурсионного путевого листа на 5 дней', 10000.00, 5, 'voucher3.png', 4);

-- 
-- Dumping data for table user
--
INSERT INTO user VALUES
(1, 'John', 'Doe', '1990-05-25', '1234567890', 'johndoe@example.com', 'password123'),
(2, 'Jane', 'Doe', '1992-09-13', '0987654321', 'janedoe@example.com', 'password456'),
(11, 'Игорь', 'Петров', '2023-01-03', '+375 (29) 830-49-27', 'mail@mail.ru', 'Catcat1'),
(14, 'Игорь', 'Сидоров', '2022-11-30', '+375 (29) 830-49-27', 'mail@mail.ru', 'Qwerwer12'),
(15, 'Анжелика', 'Пупкина', '2023-02-07', '+375 (29) 830-49-27', 'mail@mail.ru', 'Wreerghebrjhgb23'),
(16, 'Анфиса', 'Пупкина', '2022-09-28', '+375 (29) 830-49-27', 'mail@mail.ru', 'Wresdfsdf54');

-- 
-- Dumping data for table vouchersservices
--
INSERT INTO vouchersservices VALUES
(1, 18, 5),
(2, 18, 8),
(3, 18, 7),
(5, 18, 6),
(6, 19, 5);

-- 
-- Dumping data for table booking
--
INSERT INTO booking VALUES
(7, 11, 18, '2023-05-16', 30000.00),
(13, 11, 19, '2023-05-24', 20000.00);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;